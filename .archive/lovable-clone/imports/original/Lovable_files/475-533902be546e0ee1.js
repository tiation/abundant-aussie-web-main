try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="06202adf-caf8-4e51-a198-54ff423ba10a",e._sentryDebugIdIdentifier="sentry-dbid-06202adf-caf8-4e51-a198-54ff423ba10a")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{93950:function(e,t,r){r.d(t,{DeletedProjectDialog:function(){return c}});var s=r(57437),n=r(99376),i=r(2265),l=r(4310),u=r(62869),a=r(26110);let c=()=>{let[e,t]=(0,i.useState)(!1),r=(0,n.useRouter)(),[c,o]=(0,i.useState)(null),[h,d]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=new URLSearchParams(window.location.search),r=e.get("deleted"),s=e.get("projectName"),n=e.get("githubOwner");"true"===r&&s&&n&&(t(!0),o(s),d(n))},[]);let p=()=>{t(!1),r.replace("/")};return(0,s.jsx)(a.Vq,{open:e,onOpenChange:p,children:(0,s.jsxs)(a.cZ,{children:[(0,s.jsxs)(a.fK,{children:[(0,s.jsx)(a.$N,{children:"Project Deleted"}),(0,s.jsx)(a.Be,{children:"Your project has been deleted. If you want to delete the GitHub repository as well, go to the repo settings."})]}),(0,s.jsxs)(a.cN,{children:[(0,s.jsx)(u.z,{variant:"outline",size:"sm",onClick:p,children:"Close"}),(0,s.jsx)(u.z,{size:"sm",onClick:()=>{window.open((0,l.c_)(c,h)+"/settings")},children:"Github Repo Settings"})]})]})})}},94083:function(e,t,r){r.d(t,{LandingPageContentSwitch:function(){return C}});var s=r(57437),n=r(2265),i=r(92850),l=r(46214),u=r(52935),a=r(5199),c=r(55194),o=r(62869),h=r(49284),d=r(33187);let p=()=>{let[e,t]=(0,n.useState)("remixes"),[r,p]=(0,n.useState)("all"),[f,g]=(0,n.useState)([]),[m,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{g([]),x(null)},[e,r]);let{data:j,isLoading:A,isFetching:v}=(0,i.a)({...d.W.communityProjects(16,e,r,m),placeholderData:e=>e}),y=A||v;(0,n.useEffect)(()=>{j&&g(e=>[...e,...j.projects])},[j]);let C=!!(null==j?void 0:j.hasMore),w=(0,n.useMemo)(()=>(0,s.jsx)(a.A,{title:"From the Community",viewAllLink:"/projects/featured",filters:(0,s.jsx)(u.b,{orderBy:e,setOrderBy:t,category:r,setCategory:p,isCommunityProject:!0})}),[e,r]),b="trending"===e?"trending-rank":"recent"===e?"edit-time":"remixes";return(0,s.jsx)(c.o,{projects:f,isLoading:y,showMoreButton:C?(0,s.jsx)("div",{className:"mt-0 flex justify-center",children:(0,s.jsx)(o.z,{onClick:()=>{!v&&C&&(null==j?void 0:j.nextCursor)&&f.length>0&&(l.ZP.capture(h.SL.COMMUNITY.SHOW_MORE_CLICKED,{current_projects_count:f.length,order_by:e,category:r}),x(j.nextCursor))},variant:"muted",className:"mt-8",disabled:y,loading:y,children:y?"Loading...":"Show More"})}):null,showAvatar:!0,header:w,selectedCategory:r,subtitleType:b,isCommunityProject:!0})};var f=r(61922),g=r(71688),m=r(38065);let x=e=>{let{isDraft:t}=e,r=(0,f.aS)(e=>e.currentWorkspace),i=(0,f.aS)(e=>e.memberships),{projects:l,isLoadingFirstBatch:u,isLoadingAllProjects:h,hasMore:d,searchQuery:p,setSearchQuery:x,selectedUserId:j,setSelectedUserId:A,sortBy:v,setSortBy:y,order:C,setOrder:w,showMore:b,allProjects:E}=(0,m._)({workspaceId:null==r?void 0:r.id,pageSize:8,isDraft:t}),D=(0,n.useMemo)(()=>{let e=!r||u,n=(null==r?void 0:r.name)?"".concat(r.name,"'s Workspace"):"",l=t?"My personal projects":n;return(0,s.jsx)(a.A,{title:l,viewAllLink:t?void 0:"/projects/workspace",isLoading:e,filters:e?void 0:(0,s.jsx)(g.M,{selectedUserId:j,setSelectedUserId:A,memberships:i||[],sortBy:v,setSortBy:y,order:C,setOrder:w,searchQuery:p,setSearchQuery:x})})},[r,t,u,i,C,p,j,w,x,A,y,v]),_="updated_at"===v?"edit-time":"create-time";return t&&E&&0===E.length&&!u?null:(0,s.jsx)(c.o,{projects:l,isLoading:u||!r,showMoreButton:d?(0,s.jsx)("div",{className:"mt-0 flex flex-col items-center justify-center gap-1",children:(0,s.jsx)(o.z,{onClick:b,variant:"muted",className:"mt-8",disabled:h,children:"Show more"})}):null,showAvatar:!0,header:D,subtitleType:_,isCommunityProject:!1,noProjectsMessage:h?"Getting all your projects...":"No projects found"})};var j=r(52558),A=r(17714);let v=()=>{let{data:e,isLoading:t}=(0,i.a)(d.W.sharedWithMe());return(null==e?void 0:e.length)?(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsx)("p",{className:"text-2xl font-medium",children:"Shared with me"}),(0,s.jsx)(A._,{projects:null!=e?e:[],isLoading:t,showAvatar:!0,subtitleType:"edit-time",isCommunityProject:!1})]}):null},y=()=>{let{authUser:e}=(0,j.Eu)();return(0,s.jsxs)("div",{className:"flex w-full flex-col gap-12 rounded-[20px] bg-background px-8 py-8",children:[e&&(0,s.jsx)(x,{isDraft:!0}),e&&(0,s.jsx)(x,{}),(0,s.jsx)(v,{}),(0,s.jsx)(p,{})]})},C=()=>(0,s.jsx)(n.Suspense,{children:(0,s.jsx)(y,{})})},17714:function(e,t,r){r.d(t,{_:function(){return l}});var s=r(57437),n=r(2265),i=r(63210);let l=(0,n.memo)(e=>{let{projects:t,isLoading:r,isSupabaseClickable:n=!1,showAvatar:l=!0,placeholderCount:u=8,selectedCategory:a,subtitleType:c,isCommunityProject:o,noProjectsMessage:h="No projects found"}=e,d=r?u-t.length:0;return r||t&&0!==t.length?(0,s.jsxs)("div",{className:"grid w-full grid-cols-1 gap-6 md:grid-cols-3 lg:grid-cols-4",children:[null==t?void 0:t.map((e,t)=>(0,s.jsx)(i.t,{project:e,isSupabaseClickable:n,showAvatar:l,selectedCategory:a,subtitleType:c,isCommunityProject:o,positionIndex:t},e.id)),r&&d>0&&Array.from({length:d}).map((e,r)=>(0,s.jsx)(i.t,{project:null,selectedCategory:a,subtitleType:c,isCommunityProject:o,positionIndex:t.length+r},r))]}):(0,s.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:h})});l.displayName="ProjectsGrid"},55194:function(e,t,r){r.d(t,{o:function(){return l}});var s=r(57437),n=r(17714),i=r(94508);let l=e=>{let{projects:t,isLoading:r,className:l,showAvatar:u=!0,header:a,selectedCategory:c,subtitleType:o,isCommunityProject:h,showMoreButton:d,noProjectsMessage:p}=e;return(0,s.jsxs)("div",{className:(0,i.cn)("flex flex-col gap-5",l),children:[a,(0,s.jsx)(n._,{projects:t,isLoading:r,showAvatar:u,selectedCategory:c,subtitleType:o,isCommunityProject:h,noProjectsMessage:p}),d]})}},52935:function(e,t,r){r.d(t,{b:function(){return o}});var s=r(57437),n=r(35974),i=r(53647),l=r(27132),u=r(46214),a=r(49284),c=r(97801);let o=e=>{let{orderBy:t,setOrderBy:r,category:o,setCategory:h,isCommunityProject:d=!1}=e,p=(0,l.Z)("md"),f=e=>{d&&u.ZP.capture(a.SL.COMMUNITY.CATEGORY_CHANGED,{category_type:"project_category",new_value:e,previous_value:o}),h(e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.Ph,{value:t,onValueChange:e=>{d&&u.ZP.capture(a.SL.COMMUNITY.FILTER_CHANGED,{filter_type:"order_by",new_value:e,previous_value:t}),r(e)},children:[(0,s.jsx)(i.i4,{className:"w-36",children:(0,s.jsx)(i.ki,{placeholder:"Sort by"})}),(0,s.jsxs)(i.Bw,{children:[(0,s.jsx)(i.Ql,{value:"remixes",children:"Popular"}),(0,s.jsx)(i.Ql,{value:"trending",children:"Trending"}),(0,s.jsx)(i.Ql,{value:"recent",children:"Recent"})]})]}),p?(0,s.jsxs)(i.Ph,{value:o,onValueChange:f,children:[(0,s.jsx)(i.i4,{className:"w-44",children:(0,s.jsx)(i.ki,{placeholder:"Discover"})}),(0,s.jsxs)(i.Bw,{children:[(0,s.jsx)(i.Ql,{value:"all",children:"Discover"}),Object.entries(c.E).map(e=>{let[t,r]=e;return(0,s.jsx)(i.Ql,{value:t,children:String(r)},t)})]})]}):(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(n.C,{variant:"all"===o?"secondary":"outline",className:"h-9 cursor-pointer px-3 py-2 text-sm",onClick:()=>f("all"),children:"Discover"}),Object.entries(c.E).map(e=>{let[t,r]=e;return(0,s.jsx)(n.C,{variant:o===t?"secondary":"outline",className:"h-9 cursor-pointer px-3 py-2 text-sm",onClick:()=>f(t),children:String(r)},t)})]})]})}},5199:function(e,t,r){r.d(t,{A:function(){return a}});var s=r(57437),n=r(27648),i=r(62869),l=r(93022),u=r(71688);let a=e=>{let{title:t,viewAllLink:r,filters:a,isLoading:c=!1}=e,o=c||a||r;return(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:gap-4",children:[(0,s.jsx)("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:gap-4",children:(0,s.jsx)("div",{className:"flex w-full items-center",children:c?(0,s.jsx)(l.O,{className:"h-8 w-48"}):(0,s.jsx)("p",{className:"text-2xl font-medium",children:t})})}),o&&(0,s.jsxs)("div",{className:"flex w-full flex-col justify-between gap-2 sm:flex-row sm:gap-4",children:[c?(0,s.jsx)(u.k,{}):a||null,r?c&&r?(0,s.jsx)(l.O,{className:"h-9 w-36"}):(0,s.jsx)("div",{className:"ml-auto flex w-36 justify-end md:ml-0",children:(0,s.jsx)(i.z,{variant:"ghost",className:"h-9",children:(0,s.jsx)(n.default,{href:r,className:"focus:outline-none",children:"View All"})})}):null]})]})}},71688:function(e,t,r){r.d(t,{M:function(){return g},k:function(){return m}});var s=r(57437),n=r(2265),i=r(52558),l=r(62869),u=r(25206),a=r(55721),c=r(57346),o=r(95186),h=r(93022),d=r(94508);let p=[{value:"updated_at",label:"Last edited"},{value:"created_at",label:"Date created"},{value:"name",label:"Alphabetical"}],f=e=>{switch(e){case"updated_at":case"created_at":return[{value:"desc",label:"Newest first"},{value:"asc",label:"Oldest first"}];case"name":return[{value:"asc",label:"A–Z"},{value:"desc",label:"Z–A"}];default:return[]}},g=e=>{var t;let{selectedUserId:r,setSelectedUserId:h,memberships:g,sortBy:m,setSortBy:x,order:j,setOrder:A,searchQuery:v,setSearchQuery:y}=e,{authUser:C}=(0,i.Eu)(),w=f(m),b=(0,n.useMemo)(()=>[{value:"all",label:"All creators"},...g.map(e=>({value:e.user_id,label:"".concat(e.display_name||e.email).concat(e.user_id===(null==C?void 0:C.uid)?" (You)":"")}))],[g,null==C?void 0:C.uid]),E=e=>{x(e);let t=f(e)[0];t&&A(t.value)},D=null===(t=p.find(e=>e.value===m))||void 0===t?void 0:t.label;return(0,s.jsxs)("div",{className:"flex w-full flex-wrap gap-2 md:flex-nowrap",children:[(0,s.jsxs)("div",{className:"relative w-[200px]",children:[(0,s.jsx)(o.I,{value:v,onChange:e=>y(e.target.value),placeholder:"Search projects...",className:"pl-8"}),(0,s.jsx)("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 transform",children:(0,s.jsx)(c.Z,{name:"search",size:"small",className:"text-muted-foreground"})})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 md:flex-nowrap",children:[(0,s.jsxs)(a.h_,{children:[(0,s.jsx)(a.$F,{asChild:!0,className:"px-3 py-2",children:(0,s.jsxs)(l.z,{variant:"outline",className:"h-9 w-[160px] justify-between bg-transparent font-normal hover:border-input hover:bg-transparent",children:[D,(0,s.jsx)(c.Z,{name:"keyboard_arrow_down",size:"small"})]})}),(0,s.jsxs)(a.AW,{className:"dropdown-content-min-width-full w-56",align:"start",children:[(0,s.jsx)(a.Ju,{children:"Sort by"}),p.map(e=>(0,s.jsx)(a.Xi,{onClick:()=>E(e.value),className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("span",{children:e.label}),m===e.value&&(0,s.jsx)(c.Z,{name:"check",size:"small"})]})},e.value)),(0,s.jsx)(a.VD,{}),(0,s.jsx)(a.Ju,{children:"Order"}),w.map(e=>(0,s.jsx)(a.Xi,{onClick:()=>A(e.value),className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("span",{children:e.label}),j===e.value&&(0,s.jsx)(c.Z,{name:"check",size:"small"})]})},e.value))]})]}),(0,s.jsx)(u.h,{options:b,value:r,onValueChange:h,placeholder:"All creators",searchPlaceholder:"Search creators...",className:(0,d.cn)("h-9 w-[180px] bg-transparent font-normal hover:border-input hover:bg-transparent",{"border-none border-primary bg-primary text-primary-foreground hover:border-none hover:bg-primary":"all"!==r}),contentClassName:"w-[200px]"})]})]})},m=()=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.O,{className:"h-9 w-[200px]"}),(0,s.jsx)(h.O,{className:"h-9 w-[160px]"}),(0,s.jsx)(h.O,{className:"h-9 w-[180px]"})]})},38065:function(e,t,r){r.d(t,{_:function(){return o}});var s=r(92850),n=r(5978),i=r(53916),l=r(2265),u=r(89668);let a=e=>{if(!e)return 0;try{if(e instanceof n.EK)return e.toDate().getTime();if("number"==typeof e)return isNaN(e)?0:e;if("string"==typeof e){let t=Date.parse(e);return isNaN(t)?0:t}return 0}catch(e){return 0}},c=(e,t,r)=>e.sort((e,s)=>{let n=0;switch(t){case"name":n=(e.name||"").localeCompare(s.name||"");break;case"created_at":n=a(e.created_at)-a(s.created_at);break;default:n=a(e.updated_at)-a(s.updated_at)}return"desc"===r?-n:n}),o=e=>{let{workspaceId:t,pageSize:r=8,isDraft:n=!1}=e,[a,o]=(0,l.useState)(""),[h,d]=(0,l.useState)(1),[p,f]=(0,l.useState)("all"),[g,m]=(0,l.useState)("updated_at"),[x,j]=(0,l.useState)("desc");(0,l.useEffect)(()=>{f("all"),m("updated_at"),j("desc"),o(""),d(1)},[t]),(0,l.useEffect)(()=>{d(1)},[p,g,x,a]);let{data:A,isLoading:v}=(0,s.a)(u.t.projects({workspaceId:t,userId:p,limit:r,isDraft:n})),{data:y,isLoading:C}=(0,s.a)({...u.t.projects({workspaceId:t,userId:p,isDraft:n}),enabled:!!t}),w=(0,l.useMemo)(()=>({keys:[{name:"name",weight:.5},{name:"description",weight:.5},{name:"tech_stack",weight:.3}],threshold:.5,includeScore:!0}),[]),b=(0,l.useMemo)(()=>{let e=(null==y?void 0:y.projects)||(null==A?void 0:A.projects);return e?new i.Z(e,w):null},[null==y?void 0:y.projects,null==A?void 0:A.projects,w]),E=(0,l.useMemo)(()=>{let e=(null==y?void 0:y.projects)||(null==A?void 0:A.projects);return e?c(a.length>0&&b?b.search(a).map(e=>e.item):[...e],g,x):[]},[null==y?void 0:y.projects,null==A?void 0:A.projects,a,b,g,x]),D=(0,l.useMemo)(()=>E.slice(0,h*r),[E,h,r]),_=E.length>h*r||C;return{projects:D,allProjects:null==y?void 0:y.projects,isLoadingFirstBatch:v,isLoadingAllProjects:C,hasMore:_,searchQuery:a,setSearchQuery:o,selectedUserId:p,setSelectedUserId:f,sortBy:g,setSortBy:m,order:x,setOrder:j,showMore:()=>{_&&d(e=>e+1)}}}},25206:function(e,t,r){r.d(t,{h:function(){return h}});var s=r(57437),n=r(2265),i=r(62869),l=r(23518),u=r(57054),a=r(94508),c=r(22287),o=r(57346);function h(e){var t;let{options:r=[],groups:h=[],value:d="",onValueChange:p,placeholder:f="Select option...",searchPlaceholder:g="Search...",emptyText:m="No option found.",className:x,contentClassName:j="",disabled:A=!1,filter:v,renderOption:y,loading:C=!1,hasMore:w=!1,onScrollBottom:b}=e,[E,D]=n.useState(!1),_=n.useMemo(()=>{let e=[...r];return h.forEach(t=>{e.push(...t.options)}),e.find(e=>e.value===d)},[r,h,d]),B=e=>{null==p||p(e===d?"":e),D(!1)},F=n.useCallback(e=>{let t=e.currentTarget;w&&!C&&t.scrollHeight>t.clientHeight&&t.scrollHeight-t.scrollTop-t.clientHeight<32&&b&&b()},[b,C,w]);return(0,s.jsxs)(u.J2,{open:E,onOpenChange:D,modal:!0,children:[(0,s.jsx)(u.xo,{asChild:!0,children:(0,s.jsxs)(i.z,{variant:"outline",role:"combobox","aria-expanded":E,disabled:A,className:(0,a.cn)("min-w-[160px] justify-between px-2",x),children:[null!==(t=null==_?void 0:_.label)&&void 0!==t?t:f,(0,s.jsx)(o.Z,{name:"chevron_left",className:"-rotate-90 opacity-50"})]})}),(0,s.jsx)(u.yk,{className:(0,a.cn)("w-full min-w-[var(--radix-popover-trigger-width)] bg-popover p-0",j),children:(0,s.jsxs)(l.mY,{filter:v,className:"overflow-hidden",children:[(0,s.jsx)(l.sZ,{placeholder:g,className:"h-9 focus-visible:ring-0 focus-visible:ring-offset-0"}),(0,s.jsxs)(l.e8,{className:"max-h-72 overflow-auto",onScroll:F,children:[(0,s.jsx)(l.rb,{children:m}),r.length>0&&(0,s.jsx)(l.fu,{children:r.map(e=>(0,s.jsx)(l.di,{value:e.value,onSelect:B,keywords:[e.label],children:y?y({...e,selected:d===e.value}):(0,s.jsxs)(s.Fragment,{children:[e.label,(0,s.jsx)(o.Z,{name:"check",className:(0,a.cn)("ml-auto",d===e.value?"opacity-100":"opacity-0")})]})},e.value))}),h.map(e=>(0,s.jsx)(l.fu,{heading:e.label,children:e.options.map(e=>(0,s.jsx)(l.di,{value:e.value,onSelect:B,keywords:[e.label],children:y?y({...e,selected:d===e.value}):(0,s.jsxs)(s.Fragment,{children:[e.label,(0,s.jsx)(o.Z,{name:"check",className:(0,a.cn)("ml-auto",d===e.value?"opacity-100":"opacity-0")})]})},e.value))},e.label)),C&&(0,s.jsx)("div",{className:"flex w-full justify-center py-3",children:(0,s.jsx)(c.$,{size:"small","aria-label":"Loading more projects..."})})]})]})})]})}r(95186)},53916:function(e,t,r){function s(e){return Array.isArray?Array.isArray(e):"[object Array]"===o(e)}r.d(t,{Z:function(){return X}});let n=1/0;function i(e){return"string"==typeof e}function l(e){return"number"==typeof e}function u(e){return"object"==typeof e}function a(e){return null!=e}function c(e){return!e.trim().length}function o(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let h=e=>`Invalid value for key ${e}`,d=e=>`Pattern length exceeds max of ${e}.`,p=e=>`Missing ${e} property in key`,f=e=>`Property 'weight' in key '${e}' must be a positive integer`,g=Object.prototype.hasOwnProperty;class m{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(e=>{let r=x(e);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(e=>{e.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function x(e){let t=null,r=null,n=null,l=1,u=null;if(i(e)||s(e))n=e,t=j(e),r=A(e);else{if(!g.call(e,"name"))throw Error(p("name"));let s=e.name;if(n=s,g.call(e,"weight")&&(l=e.weight)<=0)throw Error(f(s));t=j(s),r=A(s),u=e.getFn}return{path:t,id:r,weight:l,src:n,getFn:u}}function j(e){return s(e)?e:e.split(".")}function A(e){return s(e)?e.join("."):e}var v={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(e,t){let r=[],c=!1,h=(e,t,d)=>{if(a(e)){if(t[d]){var p,f;let g=e[t[d]];if(a(g)){if(d===t.length-1&&(i(g)||l(g)||!0===(p=g)||!1===p||u(f=p)&&null!==f&&"[object Boolean]"==o(p)))r.push(null==g?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-n?"-0":t}(g));else if(s(g)){c=!0;for(let e=0,r=g.length;e<r;e+=1)h(g[e],t,d+1)}else t.length&&h(g,t,d+1)}}else r.push(e)}};return h(e,i(t)?t.split("."):t,0),c?r:r[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};let y=/[^ ]+/g;class C{constructor({getFn:e=v.getFn,fieldNormWeight:t=v.fieldNormWeight}={}){this.norm=function(e=1,t=3){let r=new Map,s=Math.pow(10,t);return{get(t){let n=t.match(y).length;if(r.has(n))return r.get(n);let i=parseFloat(Math.round(1/Math.pow(n,.5*e)*s)/s);return r.set(n,i),i},clear(){r.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((e,t)=>{this._keysMap[e.id]=t})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,i(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();i(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,r=this.size();t<r;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!a(e)||c(e))return;let r={v:e,i:t,n:this.norm.get(e)};this.records.push(r)}_addObject(e,t){let r={i:t,$:{}};this.keys.forEach((t,n)=>{let l=t.getFn?t.getFn(e):this.getFn(e,t.path);if(a(l)){if(s(l)){let e=[],t=[{nestedArrIndex:-1,value:l}];for(;t.length;){let{nestedArrIndex:r,value:n}=t.pop();if(a(n)){if(i(n)&&!c(n)){let t={v:n,i:r,n:this.norm.get(n)};e.push(t)}else s(n)&&n.forEach((e,r)=>{t.push({nestedArrIndex:r,value:e})})}}r.$[n]=e}else if(i(l)&&!c(l)){let e={v:l,n:this.norm.get(l)};r.$[n]=e}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function w(e,t,{getFn:r=v.getFn,fieldNormWeight:s=v.fieldNormWeight}={}){let n=new C({getFn:r,fieldNormWeight:s});return n.setKeys(e.map(x)),n.setSources(t),n.create(),n}function b(e,{errors:t=0,currentLocation:r=0,expectedLocation:s=0,distance:n=v.distance,ignoreLocation:i=v.ignoreLocation}={}){let l=t/e.length;if(i)return l;let u=Math.abs(s-r);return n?l+u/n:u?1:l}let E=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class D{constructor(e,{location:t=v.location,threshold:r=v.threshold,distance:s=v.distance,includeMatches:n=v.includeMatches,findAllMatches:i=v.findAllMatches,minMatchCharLength:l=v.minMatchCharLength,isCaseSensitive:u=v.isCaseSensitive,ignoreDiacritics:a=v.ignoreDiacritics,ignoreLocation:c=v.ignoreLocation}={}){if(this.options={location:t,threshold:r,distance:s,includeMatches:n,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:a,ignoreLocation:c},e=u?e:e.toLowerCase(),e=a?E(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;let o=(e,t)=>{this.chunks.push({pattern:e,alphabet:function(e){let t={};for(let r=0,s=e.length;r<s;r+=1){let n=e.charAt(r);t[n]=(t[n]||0)|1<<s-r-1}return t}(e),startIndex:t})},h=this.pattern.length;if(h>32){let e=0,t=h%32,r=h-t;for(;e<r;)o(this.pattern.substr(e,32),e),e+=32;if(t){let e=h-32;o(this.pattern.substr(e),e)}}else o(this.pattern,0)}searchIn(e){let{isCaseSensitive:t,ignoreDiacritics:r,includeMatches:s}=this.options;if(e=t?e:e.toLowerCase(),e=r?E(e):e,this.pattern===e){let t={isMatch:!0,score:0};return s&&(t.indices=[[0,e.length-1]]),t}let{location:n,distance:i,threshold:l,findAllMatches:u,minMatchCharLength:a,ignoreLocation:c}=this.options,o=[],h=0,p=!1;this.chunks.forEach(({pattern:t,alphabet:r,startIndex:f})=>{let{isMatch:g,score:m,indices:x}=function(e,t,r,{location:s=v.location,distance:n=v.distance,threshold:i=v.threshold,findAllMatches:l=v.findAllMatches,minMatchCharLength:u=v.minMatchCharLength,includeMatches:a=v.includeMatches,ignoreLocation:c=v.ignoreLocation}={}){let o;if(t.length>32)throw Error(d(32));let h=t.length,p=e.length,f=Math.max(0,Math.min(s,p)),g=i,m=f,x=u>1||a,j=x?Array(p):[];for(;(o=e.indexOf(t,m))>-1;)if(g=Math.min(b(t,{currentLocation:o,expectedLocation:f,distance:n,ignoreLocation:c}),g),m=o+h,x){let e=0;for(;e<h;)j[o+e]=1,e+=1}m=-1;let A=[],y=1,C=h+p,w=1<<h-1;for(let s=0;s<h;s+=1){let i=0,u=C;for(;i<u;)b(t,{errors:s,currentLocation:f+u,expectedLocation:f,distance:n,ignoreLocation:c})<=g?i=u:C=u,u=Math.floor((C-i)/2+i);C=u;let a=Math.max(1,f-u+1),o=l?p:Math.min(f+u,p)+h,d=Array(o+2);d[o+1]=(1<<s)-1;for(let i=o;i>=a;i-=1){let l=i-1,u=r[e.charAt(l)];if(x&&(j[l]=+!!u),d[i]=(d[i+1]<<1|1)&u,s&&(d[i]|=(A[i+1]|A[i])<<1|1|A[i+1]),d[i]&w&&(y=b(t,{errors:s,currentLocation:l,expectedLocation:f,distance:n,ignoreLocation:c}))<=g){if(g=y,(m=l)<=f)break;a=Math.max(1,2*f-m)}}if(b(t,{errors:s+1,currentLocation:f,expectedLocation:f,distance:n,ignoreLocation:c})>g)break;A=d}let E={isMatch:m>=0,score:Math.max(.001,y)};if(x){let e=function(e=[],t=v.minMatchCharLength){let r=[],s=-1,n=-1,i=0;for(let l=e.length;i<l;i+=1){let l=e[i];l&&-1===s?s=i:l||-1===s||((n=i-1)-s+1>=t&&r.push([s,n]),s=-1)}return e[i-1]&&i-s>=t&&r.push([s,i-1]),r}(j,u);e.length?a&&(E.indices=e):E.isMatch=!1}return E}(e,t,r,{location:n+f,distance:i,threshold:l,findAllMatches:u,minMatchCharLength:a,includeMatches:s,ignoreLocation:c});g&&(p=!0),h+=m,g&&x&&(o=[...o,...x])});let f={isMatch:p,score:p?h/this.chunks.length:1};return p&&s&&(f.indices=o),f}}class _{constructor(e){this.pattern=e}static isMultiMatch(e){return B(e,this.multiRegex)}static isSingleMatch(e){return B(e,this.singleRegex)}search(){}}function B(e,t){let r=e.match(t);return r?r[1]:null}class F extends _{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class N extends _{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class M extends _{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class k extends _{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class S extends _{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class I extends _{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class L extends _{constructor(e,{location:t=v.location,threshold:r=v.threshold,distance:s=v.distance,includeMatches:n=v.includeMatches,findAllMatches:i=v.findAllMatches,minMatchCharLength:l=v.minMatchCharLength,isCaseSensitive:u=v.isCaseSensitive,ignoreDiacritics:a=v.ignoreDiacritics,ignoreLocation:c=v.ignoreLocation}={}){super(e),this._bitapSearch=new D(e,{location:t,threshold:r,distance:s,includeMatches:n,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class O extends _{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,r=0,s=[],n=this.pattern.length;for(;(t=e.indexOf(this.pattern,r))>-1;)r=t+n,s.push([t,r-1]);let i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}let $=[F,O,M,k,I,S,N,L],P=$.length,R=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,T=new Set([L.type,O.type]);class z{constructor(e,{isCaseSensitive:t=v.isCaseSensitive,ignoreDiacritics:r=v.ignoreDiacritics,includeMatches:s=v.includeMatches,minMatchCharLength:n=v.minMatchCharLength,ignoreLocation:i=v.ignoreLocation,findAllMatches:l=v.findAllMatches,location:u=v.location,threshold:a=v.threshold,distance:c=v.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:r,includeMatches:s,minMatchCharLength:n,findAllMatches:l,ignoreLocation:i,location:u,threshold:a,distance:c},e=t?e:e.toLowerCase(),e=r?E(e):e,this.pattern=e,this.query=function(e,t={}){return e.split("|").map(e=>{let r=e.trim().split(R).filter(e=>e&&!!e.trim()),s=[];for(let e=0,n=r.length;e<n;e+=1){let n=r[e],i=!1,l=-1;for(;!i&&++l<P;){let e=$[l],r=e.isMultiMatch(n);r&&(s.push(new e(r,t)),i=!0)}if(!i)for(l=-1;++l<P;){let e=$[l],r=e.isSingleMatch(n);if(r){s.push(new e(r,t));break}}}return s})}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:s,ignoreDiacritics:n}=this.options;e=s?e:e.toLowerCase(),e=n?E(e):e;let i=0,l=[],u=0;for(let s=0,n=t.length;s<n;s+=1){let n=t[s];l.length=0,i=0;for(let t=0,s=n.length;t<s;t+=1){let s=n[t],{isMatch:a,indices:c,score:o}=s.search(e);if(a){if(i+=1,u+=o,r){let e=s.constructor.type;T.has(e)?l=[...l,...c]:l.push(c)}}else{u=0,i=0,l.length=0;break}}if(i){let e={isMatch:!0,score:u/i};return r&&(e.indices=l),e}}return{isMatch:!1,score:1}}}let W=[];function Z(e,t){for(let r=0,s=W.length;r<s;r+=1){let s=W[r];if(s.condition(e,t))return new s(e,t)}return new D(e,t)}let H={AND:"$and",OR:"$or"},K={PATH:"$path",PATTERN:"$val"},V=e=>!!(e[H.AND]||e[H.OR]),G=e=>!!e[K.PATH],Y=e=>!s(e)&&u(e)&&!V(e),J=e=>({[H.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Q(e,t,{auto:r=!0}={}){let n=e=>{let l=Object.keys(e),u=G(e);if(!u&&l.length>1&&!V(e))return n(J(e));if(Y(e)){let s=u?e[K.PATH]:l[0],n=u?e[K.PATTERN]:e[s];if(!i(n))throw Error(h(s));let a={keyId:A(s),pattern:n};return r&&(a.searcher=Z(n,t)),a}let a={children:[],operator:l[0]};return l.forEach(t=>{let r=e[t];s(r)&&r.forEach(e=>{a.children.push(n(e))})}),a};return V(e)||(e=J(e)),n(e)}function U(e,t){let r=e.matches;t.matches=[],a(r)&&r.forEach(e=>{if(!a(e.indices)||!e.indices.length)return;let{indices:r,value:s}=e,n={indices:r,value:s};e.key&&(n.key=e.key.src),e.idx>-1&&(n.refIndex=e.idx),t.matches.push(n)})}function q(e,t){t.score=e.score}class X{constructor(e,t={},r){this.options={...v,...t},this.options.useExtendedSearch,this._keyStore=new m(this.options.keys),this.setCollection(e,r)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof C))throw Error("Incorrect 'index' type");this._myIndex=t||w(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){a(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let t=[];for(let r=0,s=this._docs.length;r<s;r+=1){let n=this._docs[r];e(n,r)&&(this.removeAt(r),r-=1,s-=1,t.push(n))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){let{includeMatches:r,includeScore:s,shouldSort:n,sortFn:u,ignoreFieldNorm:a}=this.options,c=i(e)?i(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return!function(e,{ignoreFieldNorm:t=v.ignoreFieldNorm}){e.forEach(e=>{let r=1;e.matches.forEach(({key:e,norm:s,score:n})=>{let i=e?e.weight:null;r*=Math.pow(0===n&&i?Number.EPSILON:n,(i||1)*(t?1:s))}),e.score=r})}(c,{ignoreFieldNorm:a}),n&&c.sort(u),l(t)&&t>-1&&(c=c.slice(0,t)),function(e,t,{includeMatches:r=v.includeMatches,includeScore:s=v.includeScore}={}){let n=[];return r&&n.push(U),s&&n.push(q),e.map(e=>{let{idx:r}=e,s={item:t[r],refIndex:r};return n.length&&n.forEach(t=>{t(e,s)}),s})}(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(e){let t=Z(e,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:e,i:r,n:n})=>{if(!a(e))return;let{isMatch:i,score:l,indices:u}=t.searchIn(e);i&&s.push({item:e,idx:r,matches:[{score:l,value:e,norm:n,indices:u}]})}),s}_searchLogical(e){let t=Q(e,this.options),r=(e,t,s)=>{if(!e.children){let{keyId:r,searcher:n}=e,i=this._findMatches({key:this._keyStore.get(r),value:this._myIndex.getValueForItemAtKeyId(t,r),searcher:n});return i&&i.length?[{idx:s,item:t,matches:i}]:[]}let n=[];for(let i=0,l=e.children.length;i<l;i+=1){let l=r(e.children[i],t,s);if(l.length)n.push(...l);else if(e.operator===H.AND)return[]}return n},s=this._myIndex.records,n={},i=[];return s.forEach(({$:e,i:s})=>{if(a(e)){let l=r(t,e,s);l.length&&(n[s]||(n[s]={idx:s,item:e,matches:[]},i.push(n[s])),l.forEach(({matches:e})=>{n[s].matches.push(...e)}))}}),i}_searchObjectList(e){let t=Z(e,this.options),{keys:r,records:s}=this._myIndex,n=[];return s.forEach(({$:e,i:s})=>{if(!a(e))return;let i=[];r.forEach((r,s)=>{i.push(...this._findMatches({key:r,value:e[s],searcher:t}))}),i.length&&n.push({idx:s,item:e,matches:i})}),n}_findMatches({key:e,value:t,searcher:r}){if(!a(t))return[];let n=[];if(s(t))t.forEach(({v:t,i:s,n:i})=>{if(!a(t))return;let{isMatch:l,score:u,indices:c}=r.searchIn(t);l&&n.push({score:u,key:e,value:t,idx:s,norm:i,indices:c})});else{let{v:s,n:i}=t,{isMatch:l,score:u,indices:a}=r.searchIn(s);l&&n.push({score:u,key:e,value:s,norm:i,indices:a})}return n}}X.version="7.1.0",X.createIndex=w,X.parseIndex=function(e,{getFn:t=v.getFn,fieldNormWeight:r=v.fieldNormWeight}={}){let{keys:s,records:n}=e,i=new C({getFn:t,fieldNormWeight:r});return i.setKeys(s),i.setIndexRecords(n),i},X.config=v,X.parseQuery=Q,function(...e){W.push(...e)}(z)}}]);